/* * This Code is heavily influenced by the NodeBox Colors Library.  * See http://nodebox.net/code/index.php/Colors and http://nodebox.net *  * Ported and rewritten in 2009 by Philipp Laeubli and licensed under GPL.  * See LICENSE.txt for details. *  * Copyright (c) 2009 Philipp Laeubli * Original NodeBox Colors Library: Tom De Smedt, Frederic De Bleser * */package ch.badmojo.color {	import flash.display.Graphics;	import flash.display.Sprite;	import flash.text.TextField;	import flash.text.TextFormat;			/**	 * @author phil	 */	public class ColorWheel {		private var _list : Array;		private var _index : Number;		public function ColorWheel(firstColor : Color = null) {			_list = new Array();			_index = 0;				if(firstColor != null) {				addColor(firstColor);			}		}		public function addColor(color : Color) : void {			_list.push(color);		}		public function getColor() : Color {			var result : Color = _list[_index];			rotate();			return result;		}		public function getAsList() : Array {			return _list;		}		private function rotate() : void {			if(_index == _list.length - 1) {				_index = 0;						} else {				_index++;			}		}		public function brighten(amount : Number = 10) : void {			for each (var color : Color in _list) {				color.brighten(amount);			}		}		public function darken(amount : Number = 10) : void {			for each (var color : Color in _list) {				color.darken(amount);			}		}		public function saturate(amount : Number = 10) : void {			for each (var color : Color in _list) {				color.saturate(amount);			}		}		public function deSaturate(amount : Number = 10) : void {			for each (var color : Color in _list) {				color.deSaturate(amount);			}		}		public function getColorSample(title : String = null) : Sprite {			var sample : Sprite = new Sprite();			var mask : Sprite = new Sprite();			sample.addChild(mask);			mask.graphics.beginFill(0x000000, 0.3);			mask.graphics.drawRect(0, 0, 150, 150);			mask.graphics.endFill();			var g : Graphics = sample.graphics;			shuffle();			for (var i : int = 0;i < 100; i++) {				g.lineStyle(Math.random() * 30, getColor().getHex());				g.beginFill(0x000000, 0);				g.drawCircle(Math.random() * 150, Math.random() * 150, Math.random() * 30);				g.endFill();			}			var vector : Array = getAsList();			var squareSize : Number = 150 / vector.length;			squareSize = Math.min(20, squareSize);			for (var k : int = 0;k < vector.length; k++) {				var c : Color = vector[k];				g.lineStyle(0);				g.beginFill(c.getHex());				g.drawRect(0, k * squareSize, squareSize, squareSize);				g.endFill();			}			sample.mask = mask;			if(title) {				var txt : TextField = new TextField();				txt.defaultTextFormat = new TextFormat("Verdana", 10, 0xffffff, true);				txt.text = title;				g.beginFill(Color.BLACK.getHex()),				g.drawRect(squareSize, 0, 150, 15);				g.endFill();				sample.addChild(txt);				txt.x = squareSize + 3;				txt.y = 1;				txt.width = 150 - squareSize;			}			return sample;		}		public function copy() : ColorWheel {			var newWheel : ColorWheel = new ColorWheel();			for each (var color : Color in _list) {				newWheel.addColor(color.copy());			}			return newWheel;		}		public function contains(newColor : Color) : Boolean {			for each (var color : Color in _list) {				if(color.isEqual(newColor)) {					return true;				}			}			return false;		}
		public function mix(secondWheel : ColorWheel) : void {			var cw2 : Array = secondWheel.getAsList();			for each (var c : Color in cw2) {				this.addColor(c);			} 		}		public function shuffle() : void {			_list.sort(onShuffle);		}		public function sortByBrightness() : void {			_list.sort(onBrightness);		}		private function onShuffle(ob1 : Color , ob2 : Color) : Number {			var rnd : Number = (Math.random() * 1.2) - 0.6;			if(rnd < 0.2 && rnd > -0.2) {				return 0;			}			if(rnd > 0.2) {				return 1;			}			if(rnd < -0.2) {				return -1;			}			return -1;		}		private function onBrightness(c1 : Color, c2 : Color) : Number {			if(c1.getBrightness() > c2.getBrightness()) {				return -1;			}	else if(c1.getBrightness() == c2.getBrightness()) {				return 0;			}	else if(c1.getBrightness() < c2.getBrightness()) {				return 1;			}			return -1;		}	}}